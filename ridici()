//Zaloha stare verze funkce ridici()
FUNCTION ridici:bool //funkce, ktera spousti ve spravny cas dane casti kodu
   VAR
      i:int:=0;
      j:int:=0;
      blokace:bool:=0;
      jednou:bool:=0;
      jednou1:bool:=0;
   END_VAR
   IF probehlo_nabirani AND not blokace then
      IF not probehlo_hybej then //odveze prazdnou paletu do nakladaci oblasti
         hybej();
      END_IF;
      IF probehlo_hybej AND probehlo_vraceni then //zmeni polohu v regalu
         IF i<=2 AND j<2 AND not jednou then //podminka pro posun v polich
            j:=j+1; //posun v horizontalnim poli
            probehlo_hybej:=0;
            probehlo_nabirani:=0;
            probehlo_vraceni:=0;
            jednou:=1;
         ELSIF i<2 AND not jednou1 then
            i:=i+1; //posun v inkrementalnim poli
            jednou1:=1;
         ELSE
            blokace:=1; //zablokuje funkci po naplneni vsech palet
         END_IF;
      ELSIF probehlo_hybej then
         vraceni(i:=i, j:=j); //vrati naplnenou paletu na jeji polohu
      END_IF;
   ELSE
      nabirani(i:=i, j:=j); //nabere prazdnou paletu na prislusne pozici v regalu
      jednou:=0;
      jednou1:=1;
   END_IF;
END_FUNCTION
